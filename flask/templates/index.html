<!doctype html>
<html lang="en">
<head>
    <title>Kindleä¸­æ–‡ä¹¦åº“</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        /* Base styles for better readability */
        body {
            font-family: Arial, sans-serif;
            padding: 10px;
        }

        /* 1. Make the table fluid on small screens */
        @media screen and (max-width: 600px) {

            /* Allow the table container to scroll horizontally */
            .table-container {
                overflow-x: auto;
                width: 100%;
            }

            /* Ensure the table width is natural so it triggers the scroll */
            table {
                width: 800px; /* Force a minimum width wider than the phone screen */
                border-collapse: collapse;
                font-size: 0.8em; /* Shrink text slightly */
            }

            /* Optional: Make the title column take up more space for readability */
            td:nth-child(1), th:nth-child(1) {
                min-width: 150px;
            }

            /* Ensure the search bar takes up the full width */
            form input[type="text"] {
                width: 80%;
                box-sizing: border-box; /* Include padding/border in the element's total width */
            }
            form button {
                width: 18%;
                box-sizing: border-box;
            }
        }
    </style>
</head>
<body>
<h1>ðŸ“š Kindleä¹¦åº“</h1>

<form method="POST" action="/">
    <input type="text" name="query" placeholder="Enter book title or keyword" value="{{ query or '' }}" size="50" required>
    <button type="submit">Search</button>
</form>

<hr>

{% if books %}
    {% if query %}
        <h2>Results for "{{ query }}" ({{ books|length }} found)</h2>
    {% else %}
        <h2>âœ¨ 50 Random Books (Search above to filter)</h2>
    {% endif %}
    <table border="1" cellpadding="10" cellspacing="0">
        <thead>
            <tr>
                <th>SN</th>
                <th>Title</th>
                <th>ASIN</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td>
                    <a href="{{ url_for('download', sn=book.sn) }}">
                        {{ book.sn }}
                    </a>
                </td>
                <td><strong>{{ book.name }}</strong></td>
                <td>{{ book.asin or 'N/A' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% elif query %}
    <p>No books found matching "**{{ query }}**".</p>
{% else %}
    <p>Enter a book title or keyword to start searching.</p>
{% endif %}
